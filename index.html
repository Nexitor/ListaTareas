<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista</title>

    <script>

        function guardarDatosLS() {
            console.log('hola')
            const taskName = document.getElementById("taskName").value
            const taskDesc = document.getElementById("taskDesc").value
            const taskstate = document.getElementById("taskState").value

            localStorage.setItem(taskName + "Name", taskName)
            localStorage.setItem(taskName + "Desc", taskDesc)
            localStorage.setItem(taskName + "State", taskstate)
            
            // Reseteamos el formunario
            document.getElementById('miFormulario').reset()
        }

        function consultarDatosLS() {
            
            // Sacamos el valor del textBox para consultar sus datos
            taskName = document.getElementById('taskName').value

            const task = localStorage.getItem(taskName + "Name")
            const taskDesc = localStorage.getItem(taskName + "Desc")
            const taskState = localStorage.getItem(taskName + "State")
            
            // Pintamos los datos en el formulario

            document.getElementById("taskName").value = task
            document.getElementById("taskDesc").value = taskDesc
            document.getElementById("taskState").value = taskState


            console.log(task, taskDesc, taskState)

        }

        function actualizarDatosLS(){
            
            // Tomamos los datos nuevos que vamos a insertar
            taskName = document.getElementById('taskName').value
            taskDesc = document.getElementById('taskDesc').value
            taskState = document.getElementById('taskState').value 
            
            // Remplazamos los datos viejos
            localStorage.setItem(taskName + "Name", taskName)
            localStorage.setItem(taskName + "Desc", taskDesc)
            localStorage.setItem(taskName + "State", taskState)

        }

        function eliminarDatosLS(){

            // Tomamos el nombre para eliminar todos los datos correspondientes
            var taskName = document.getElementById("taskName").value

            // Eliminamos los registros
            localStorage.removeItem(taskName + "Name")
            localStorage.removeItem(taskName + "Desc")
            localStorage.removeItem(taskName + "State")

        }

    </script>
</head>
<body style="background-color: rgb(255, 251, 211);">
    <section>
        <hr>
        <h1>Lista de tareas</h1>
        <hr>
        <form onsubmit="guardarDatosLS(); return false" id="miFormulario">
            Nombre de tarea:
            <br>
            <input type="text" name="taskName" id="taskName">
            <br>
            Descripci√≥n de la tarea:
            <br>
            <textarea name="taskDesc" id="taskDesc" rows="5" cols="40"></textarea>
            <br>
            Estado de la tarea:
            <br>
            <input type="text" name="taskState" id="taskState">
            <br><br>
            <input type="submit" value="Enviar">
            <br>
            <input type="button" value="Consultar" onclick="consultarDatosLS(); return false">
            <input type="button" value="Actualizar" onclick="actualizarDatosLS(); return false">
            <input type="button" value="Eliminar" onclick="eliminarDatosLS(); return false">

        </form>
    </section>
</body>
</html>
